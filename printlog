#!/usr/bin/env ruby
require File.dirname(__FILE__) + "/_printlog/printlog"
require "tempfile"

options = ARGV.inject({}) do |hash, option|
  key, value = option.split("=").collect {|thing| thing.lstrip.rstrip}
  hash[key.to_sym] = value
  hash
end

stdout = options.delete(:stdout)
printer = Printlog.new(`pwd`, options)
stdout ? puts(printer.report) : `echo "#{printer.report}" | mate -a`